(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7e823b82"],{"1a23":function(t,a,e){var n,r;!function(i,o){n=o,r="function"===typeof n?n.call(a,e,a,t):n,void 0===r||(t.exports=r)}(0,function(t,a,e){var n=function(t,a,e,n,r,i){function o(t){var a,e,n,r,i,o,s=t<0;if(t=Math.abs(t).toFixed(u.decimals),t+="",a=t.split("."),e=a[0],n=a.length>1?u.options.decimal+a[1]:"",u.options.useGrouping){for(r="",i=0,o=e.length;i<o;++i)0!==i&&i%3===0&&(r=u.options.separator+r),r=e[o-i-1]+r;e=r}return u.options.numerals.length&&(e=e.replace(/[0-9]/g,function(t){return u.options.numerals[+t]}),n=n.replace(/[0-9]/g,function(t){return u.options.numerals[+t]})),(s?"-":"")+u.options.prefix+e+n+u.options.suffix}function s(t,a,e,n){return e*(1-Math.pow(2,-10*t/n))*1024/1023+a}function l(t){return"number"==typeof t&&!isNaN(t)}var u=this;if(u.version=function(){return"1.9.3"},u.options={useEasing:!0,useGrouping:!0,separator:",",decimal:".",easingFn:s,formattingFn:o,prefix:"",suffix:"",numerals:[]},i&&"object"==typeof i)for(var d in u.options)i.hasOwnProperty(d)&&null!==i[d]&&(u.options[d]=i[d]);""===u.options.separator?u.options.useGrouping=!1:u.options.separator=""+u.options.separator;for(var c=0,m=["webkit","moz","ms","o"],f=0;f<m.length&&!window.requestAnimationFrame;++f)window.requestAnimationFrame=window[m[f]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[m[f]+"CancelAnimationFrame"]||window[m[f]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(t,a){var e=(new Date).getTime(),n=Math.max(0,16-(e-c)),r=window.setTimeout(function(){t(e+n)},n);return c=e+n,r}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)}),u.initialize=function(){return!!u.initialized||(u.error="",u.d="string"==typeof t?document.getElementById(t):t,u.d?(u.startVal=Number(a),u.endVal=Number(e),l(u.startVal)&&l(u.endVal)?(u.decimals=Math.max(0,n||0),u.dec=Math.pow(10,u.decimals),u.duration=1e3*Number(r)||2e3,u.countDown=u.startVal>u.endVal,u.frameVal=u.startVal,u.initialized=!0,!0):(u.error="[CountUp] startVal ("+a+") or endVal ("+e+") is not a number",!1)):(u.error="[CountUp] target is null or undefined",!1))},u.printValue=function(t){var a=u.options.formattingFn(t);"INPUT"===u.d.tagName?this.d.value=a:"text"===u.d.tagName||"tspan"===u.d.tagName?this.d.textContent=a:this.d.innerHTML=a},u.count=function(t){u.startTime||(u.startTime=t),u.timestamp=t;var a=t-u.startTime;u.remaining=u.duration-a,u.options.useEasing?u.countDown?u.frameVal=u.startVal-u.options.easingFn(a,0,u.startVal-u.endVal,u.duration):u.frameVal=u.options.easingFn(a,u.startVal,u.endVal-u.startVal,u.duration):u.countDown?u.frameVal=u.startVal-(u.startVal-u.endVal)*(a/u.duration):u.frameVal=u.startVal+(u.endVal-u.startVal)*(a/u.duration),u.countDown?u.frameVal=u.frameVal<u.endVal?u.endVal:u.frameVal:u.frameVal=u.frameVal>u.endVal?u.endVal:u.frameVal,u.frameVal=Math.round(u.frameVal*u.dec)/u.dec,u.printValue(u.frameVal),a<u.duration?u.rAF=requestAnimationFrame(u.count):u.callback&&u.callback()},u.start=function(t){u.initialize()&&(u.callback=t,u.rAF=requestAnimationFrame(u.count))},u.pauseResume=function(){u.paused?(u.paused=!1,delete u.startTime,u.duration=u.remaining,u.startVal=u.frameVal,requestAnimationFrame(u.count)):(u.paused=!0,cancelAnimationFrame(u.rAF))},u.reset=function(){u.paused=!1,delete u.startTime,u.initialized=!1,u.initialize()&&(cancelAnimationFrame(u.rAF),u.printValue(u.startVal))},u.update=function(t){if(u.initialize()){if(t=Number(t),!l(t))return void(u.error="[CountUp] update() - new endVal is not a number: "+t);u.error="",t!==u.frameVal&&(cancelAnimationFrame(u.rAF),u.paused=!1,delete u.startTime,u.startVal=u.frameVal,u.endVal=t,u.countDown=u.startVal>u.endVal,u.rAF=requestAnimationFrame(u.count))}},u.initialize()&&u.printValue(u.startVal)};return n})},"29cc":function(t,a,e){"use strict";var n=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("Row",{staticClass:"info-card",attrs:{gutter:20}},[e("Col",{attrs:{span:12}},[e("Card",{attrs:{padding:0,shadow:""}},[e("div",{staticClass:"left",staticStyle:{background:"#ff9900"}},[e("Icon",{attrs:{type:"ios-log-in"}})],1),e("div",{staticClass:"right"},[e("ICountUp",{attrs:{startVal:0,endVal:t.rentedNum}}),e("p",[t._v("已出租")])],1)])],1),e("Col",{attrs:{span:12}},[e("Card",{attrs:{padding:0,shadow:""}},[e("div",{staticClass:"left",staticStyle:{background:"#2d8cf0"}},[e("Icon",{attrs:{type:"ios-log-out"}})],1),e("div",{staticClass:"right"},[e("ICountUp",{attrs:{startVal:0,endVal:t.unRentedNum}}),e("p",[t._v("未出租")])],1)])],1)],1)},r=[],i=e("4260"),o=e("4685"),s=e.n(o),l={components:{ICountUp:s.a},name:"",props:["id"],data:function(){return{rentedNum:0,unRentedNum:0}},methods:{getData:function(){var t=this,a=this.id,e={};if(void 0==a)return this.rentedNum=0,void(this.unRentedNum=0);e.buildingId=a,i["a"].ajax("admin/building/summary",{params:e}).then(function(a){var e=a.code,n=a.data;0==e&&(t.rentedNum=n.rentedNum,t.unRentedNum=n.unRentedNum)})}},mounted:function(){this.getData()},watch:{id:function(t){this.getData()}}},u=l,d=e("2877"),c=Object(d["a"])(u,n,r,!1,null,null,null);c.options.__file="rentalStatistics.vue";a["a"]=c.exports},"45df":function(t,a,e){"use strict";var n=e("d617"),r=e.n(n);r.a},4685:function(t,a,e){!function(a,n){t.exports=n(e("1a23"))}("undefined"!=typeof self&&self,function(t){return function(t){function a(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,a),r.l=!0,r.exports}var e={};return a.m=t,a.c=e,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,a){return Object.prototype.hasOwnProperty.call(t,a)},a.p="",a(a.s=0)}([function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=e(1),r=e.n(n),i=e(4),o=e.n(i),s={__countup__:o.a,name:"ICountUp",props:{startVal:{type:Number,required:!1,default:0},endVal:{type:Number,required:!0},decimals:{type:Number,required:!1,default:0},duration:{type:Number,required:!1,default:2},options:{type:Object,required:!1}},data:function(){return{instance:null}},watch:{endVal:{handler:function(t){var a=this;a.instance&&r()(a.instance.update)&&a.instance.update(t)},deep:!1}},methods:{init:function(){var t=this;if(!t.instance){var a=t.$el,e=new o.a(a,t.startVal,t.endVal,t.decimals,t.duration,t.options);e.error||(e.start(function(){return t.$emit("ready",e,o.a)}),t.instance=e)}},uninit:function(){this.instance=null},start:function(t){var a=this;if(a.instance&&r()(a.instance.start)&&r()(t))return a.instance.start(t)},pauseResume:function(){var t=this;if(t.instance&&r()(t.instance.pauseResume))return t.instance.pauseResume()},reset:function(){var t=this;if(t.instance&&r()(t.instance.reset))return t.instance.reset()},update:function(t){var a=this;if(a.instance&&r()(a.instance.update))return a.instance.update(t)}},mounted:function(){this.init()},beforeDestroy:function(){this.uninit()},render:function(t){return t("span",{})}};a.default=s},function(t,a,e){function n(t){if(!i(t))return!1;var a=r(t);return a==s||a==l||a==o||a==u}var r=e(2),i=e(3),o="[object AsyncFunction]",s="[object Function]",l="[object GeneratorFunction]",u="[object Proxy]";t.exports=n},function(t,a){function e(t){return r.call(t)}var n=Object.prototype,r=n.toString;t.exports=e},function(t,a){function e(t){var a=typeof t;return null!=t&&("object"==a||"function"==a)}t.exports=e},function(a,e){a.exports=t}])})},4737:function(t,a,e){"use strict";var n=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("Form",{attrs:{"label-width":120}},[e("Row",[e("Col",{attrs:{span:12}},[e("FormItem",{attrs:{label:"地址："}},[t._v(t._s(t.data.roomAddress))])],1),e("Col",{attrs:{span:12}},[e("FormItem",{attrs:{label:"租金："}},[t._v(t._s(t.data.baseRent)+"元")])],1)],1),e("Row",[e("Col",{attrs:{span:12}},[e("FormItem",{attrs:{label:"上个月水表数："}},[t._v(t._s(t.data.watermeterLastmonth))])],1),e("Col",{attrs:{span:12}},[e("FormItem",{attrs:{label:"上个月电表数："}},[t._v(t._s(t.data.elecmeterLastmonth))])],1)],1),e("Row",[e("Col",{attrs:{span:12}},[e("FormItem",{attrs:{label:"当月水表数："}},[t._v(t._s(t.data.watermeterThismonth))])],1),e("Col",{attrs:{span:12}},[e("FormItem",{attrs:{label:"当月电表数："}},[t._v(t._s(t.data.elecmeterThismonth))])],1)],1),e("Row",[e("Col",{attrs:{span:12}},[e("FormItem",{attrs:{label:"水表总数："}},[t._v(t._s(t.data.practicalWatermeter))])],1),e("Col",{attrs:{span:12}},[e("FormItem",{attrs:{label:"电表总数："}},[t._v(t._s(t.data.practicalElecmeter))])],1)],1),e("Row",[e("Col",{attrs:{span:12}},[e("FormItem",{attrs:{label:"水费单价："}},[t._v(t._s(t.data.waterFee)+"元/方")])],1),e("Col",{attrs:{span:12}},[e("FormItem",{attrs:{label:"电费单价："}},[t._v(t._s(t.data.elecFee)+"元度")])],1)],1),e("Row",[e("Col",{attrs:{span:12}},[e("FormItem",{attrs:{label:"管理费："}},[t._v(t._s(t.data.manageFee)+"元")])],1),e("Col",{attrs:{span:12}},[e("FormItem",{attrs:{label:"网费："}},[t._v(t._s(t.data.netFee)+"元")])],1)],1),e("Row",[e("Col",{attrs:{span:12}},[e("FormItem",{attrs:{label:"燃气费："}},[t._v(t._s(t.data.gasFee)+"元")])],1),e("Col",{attrs:{span:12}},[e("FormItem",{attrs:{label:"热水费："}},[t._v(t._s(t.data.hotWaterFee)+"元")])],1)],1),e("Row",[e("Col",{attrs:{span:12}},[e("FormItem",{attrs:{label:"每月交租日："}},[t._v(t._s(t.data.rentDay)+"天")])],1),e("Col",{attrs:{span:12}},[e("FormItem",{attrs:{label:"需缴纳："}},[t._v(t._s(t.data.rentFee)+"元（"+t._s(t.status)+"）")])],1)],1)],1)},r=[],i=(e("7514"),e("cadf"),e("551c"),e("097d"),e("4260"),e("04c6")),o={props:["data"],name:"",computed:{status:function(){var t=this.data.status;return void 0!=t?i["b"].find(function(a){return a.key==t}).value:""}}},s=o,l=(e("51a2"),e("2877")),u=Object(l["a"])(s,n,r,!1,null,"ba1b1050",null);u.options.__file="billDetail.vue";a["a"]=u.exports},"51a2":function(t,a,e){"use strict";var n=e("b6b3"),r=e.n(n);r.a},"5e19":function(t,a,e){"use strict";e.r(a);var n=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("rental-statistics",{attrs:{id:t.searchData.buildingId}}),e("Divider"),e("Row",{attrs:{gutter:12}},[e("Col",{attrs:{span:"12"}},[e("search-card",[e("Form",{staticClass:"block",attrs:{"label-width":100},nativeOn:{submit:function(t){t.preventDefault()}}},[e("FormItem",{attrs:{label:"楼名："}},[e("address-select",{on:{change:t.search},model:{value:t.searchData.buildingId,callback:function(a){t.$set(t.searchData,"buildingId",a)},expression:"searchData.buildingId"}})],1),e("FormItem",{attrs:{label:"状态："}},[e("RadioGroup",{on:{"on-change":t.search},model:{value:t.searchData.status,callback:function(a){t.$set(t.searchData,"status",a)},expression:"searchData.status"}},[e("Radio",{attrs:{label:2}},[t._v("已出租")]),e("Radio",{attrs:{label:1}},[t._v("未出租")])],1)],1)],1)],1)],1),e("Col",{attrs:{span:"12"}},[e("Card",[e("p",{attrs:{slot:"title"},slot:"title"},[t._v("联系人")]),e("Form",{staticClass:"block",attrs:{"label-width":100},nativeOn:{submit:function(t){t.preventDefault()}}},[e("Row",[e("Col",{attrs:{span:"12"}},[e("FormItem",{attrs:{label:"房东："}},[t._v(t._s(t.landlord.name))])],1),e("Col",{attrs:{span:"12"}},[e("FormItem",{attrs:{label:"房管："}},[t._v(t._s(t.manager.name))])],1),e("Col",{attrs:{span:"12"}},[e("FormItem",{attrs:{label:"手机号码："}},[t._v(t._s(t.landlord.mobile))])],1),e("Col",{attrs:{span:"12"}},[e("FormItem",{attrs:{label:"手机号码："}},[t._v(t._s(t.manager.mobile))])],1)],1)],1)],1)],1)],1),e("Divider"),e("Card",{attrs:{shadow:""}},[e("h4",{attrs:{slot:"title"},slot:"title"},[t._v("\n      房屋列表\n      ")]),e("v-table",{attrs:{table:{data:t.data,loading:t.tableLoaing},total:t.total,current:t.curPage,pageSize:t.pageSize,showPage:!0},on:{"change-page":t.changePage,"update:current":function(a){t.curPage=a},"update:pageSize":function(a){t.pageSize=a}}},[e("div",{key:"name",attrs:{title:"门牌号"}}),e("div",{key:"houseType",attrs:{title:"户型"}}),e("div",{key:"tenantName",attrs:{title:"租客姓名"}}),e("div",{attrs:{title:"手机号码"},scopedSlots:t._u([{key:"default",fn:function(t){return e("div",{},[e("phone-tip",{attrs:{phone:t.mobile}})],1)}}])}),e("div",{attrs:{title:"身份证号码"},scopedSlots:t._u([{key:"default",fn:function(t){return e("div",{},[e("id-tip",{attrs:{id:t.idCardNo}})],1)}}])}),e("div",{key:"dueDate",attrs:{title:"租约日期"}}),e("div",{attrs:{title:"操作",width:200},scopedSlots:t._u([{key:"default",fn:function(a){return e("div",{},[e("Button",{attrs:{type:"warning",size:"small"},on:{click:function(e){t.edit(a)}}},[t._v("编辑房间名")]),2==t.searchData.status?e("Button",{attrs:{type:"info",size:"small"},on:{click:function(e){t.billDetail(a)}}},[t._v("查看账单")]):t._e()],1)}}])})])],1),e("Modal",{attrs:{title:"修改房屋名称",width:"320"},model:{value:t.modal.visible,callback:function(a){t.$set(t.modal,"visible",a)},expression:"modal.visible"}},[e("Form",{ref:"form",attrs:{model:t.modal.data,rules:t.modal.rules,"label-width":100}},[e("Row",[e("FormItem",{attrs:{prop:"name",label:"房屋名称："}},[e("Input",{attrs:{placeholder:"请输入房屋名称"},model:{value:t.modal.data.name,callback:function(a){t.$set(t.modal.data,"name",a)},expression:"modal.data.name"}})],1)],1)],1),e("div",{attrs:{slot:"footer"},slot:"footer"},[e("Button",{attrs:{type:"text",size:"large"},on:{click:function(a){t.modal.visible=!1}}},[t._v("取消")]),e("Button",{attrs:{type:"primary"},on:{click:t.comfirmRoom}},[t._v("确定")])],1)],1),e("Modal",{attrs:{title:"账单详情",width:660},model:{value:t.detailModal.visible,callback:function(a){t.$set(t.detailModal,"visible",a)},expression:"detailModal.visible"}},[e("Row",[e("Col",{attrs:{span:"24"}},[e("Form",{attrs:{"label-width":120}},[e("FormItem",{attrs:{label:"账单日期："}},[e("DatePicker",{attrs:{type:"month",clearable:!1},on:{"on-change":t.getBillDetail},model:{value:t.detailModal.date,callback:function(a){t.$set(t.detailModal,"date",a)},expression:"detailModal.date"}})],1)],1)],1)],1),e("bill-detail",{attrs:{data:t.detailModal.data}}),e("div",{attrs:{slot:"footer"},slot:"footer"},[e("Button",{attrs:{type:"text",size:"large"},on:{click:function(a){t.detailModal.visible=!1}}},[t._v("关闭")])],1)],1)],1)},r=[],i=(e("386d"),e("7f7f"),e("cadf"),e("551c"),e("097d"),e("4260")),o=e("338a"),s=e("29cc"),l=e("23ec"),u=e("4737"),d={mixins:[o["a"]],components:{rentalStatistics:s["a"],addressSelect:l["a"],billDetail:u["a"]},data:function(){return{url:"admin/room/list",searchData:{status:2,buildingId:null},modal:{visible:!1,data:{id:"",name:""},rules:{name:i["a"].getRequiredRule("房间名称不能为空")}},landlord:{},manager:{},detailModal:{visible:!1,data:{},date:new Date,id:""}}},methods:{beforeDataChange:function(t){var a=t.landlord,e=t.manager;return this.landlord=a||{},this.manager=e||{},t},billDetail:function(t){this.detailModal.id=t.id,this.getBillDetail()},edit:function(t){this.modal.data.id=t.id,this.modal.data.name=t.name,this.modal.visible=!0},comfirmRoom:function(){var t=this;this.$refs.form.validate(function(a){a&&i["a"].ajax.put("admin/room",t.modal.data).then(function(a){var e=a.code;0==e&&(t.$Message.success("修改成功"),t.modal.visible=!1,t.changePage(t.curPage))})})},getBillDetail:function(){var t=this,a=this.detailModal,e=a.date,n=a.id;i["a"].ajax("admin/rentinfo",{params:{month:e.getMonth()+1,year:e.getFullYear(),roomId:n}}).then(function(a){var e=a.data,n=a.code;0==n&&(e?(t.detailModal.data=e,t.detailModal.visible=!0):(t.$Message.warning("暂无账单信息"),t.detailModal.data={}))})}},activated:function(){var t=this.$route.query,a=t.id;t.address;a?(this.searchData.buildingId=parseInt(a),this.search()):(this.searchData.buildingId=null,this.data=[]),this.searchData.status=2}},c=d,m=(e("45df"),e("2877")),f=Object(m["a"])(c,n,r,!1,null,null,null);f.options.__file="rooms.vue";a["default"]=f.exports},b6b3:function(t,a,e){},d617:function(t,a,e){}}]);